      run: |
        ssh -o StrictHostKeyChecking=no ${{ secrets.USERNAME }}@${{ secrets.HOST }} -p ${{ secrets.PORT }} << 'EOF'
          cd /var/www/web-for-quyet

          # Fix "dubious ownership" error
          git config --global --add safe.directory /var/www/web-for-quyet

          # Pull latest code
          git pull --rebase origin main

          # Install backend dependencies
          composer install --no-dev --optimize-autoloader

          # Install frontend assets
          npm install
          npm run build

          # Laravel specific setup
          php artisan migrate --force
          php artisan config:cache
          php artisan route:cache
          php artisan view:cache

          chown -R nginx:nginx storage bootstrap/cache
        EOF
